<!-- index.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
    <title>블로그 | shmpyoshop</title>
    <link rel="stylesheet" href="/shmpyoBlog/blog.css"/>



    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="간편하게, 똑똑하게! 손쉽게 완성하는 나를 위한 시스템을 쉼표샵에서 만나보세요.">
    <meta name="robots" content="max-image-preview:large">
    <link href="/IMG/파비콘.svg" rel="shortcut icon" type="image/x-icon">
    <link rel="canonical" href="https://www.shmpyoshop.com/home">
    <meta property="og:locale" content="ko_KR">
    <meta property="og:site_name" content="쉼표샵 shmpyo#">
    <meta property="og:type" content="website">
    <meta property="og:title" content="쉼표샵 - 공식 홈페이지">
    <meta property="og:description" content="간편하게, 똑똑하게! 손쉽게 완성하는 나를 위한 시스템을 쉼표샵에서 만나보세요.">
    <meta property="og:url" content="https://www.shmpyoshop.com/home">
    <meta property="og:image" content="https://media.discordapp.net/attachments/1282189604803444830/1342507726852587580/7d134f0e74b599b0.png?ex=67b9e340&is=67b891c0&hm=6904e632e03d87dbba50a57a111c489a7739896954bfe1a0694361aa5689c343&=&format=webp&quality=lossless">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="쉼표샵 로고">    

    <meta name="twitter:site" content="https://www.shmpyoshop.com/home">
    <meta name="twitter:title" content="쉼표샵 - 공식 홈페이지">
    <meta name="twitter:description" content="간편하게, 똑똑하게! 손쉽게 완성하는 나를 위한 시스템을 쉼표샵에서 만나보세요.">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:src" content="https://media.discordapp.net/attachments/1282189604803444830/1342507726852587580/7d134f0e74b599b0.png?ex=67b9e340&is=67b891c0&hm=6904e632e03d87dbba50a57a111c489a7739896954bfe1a0694361aa5689c343&=&format=webp&quality=lossless">
</head>
<body>
    <div id="header-container"></div>
    <div class="information_1_section">
        <p class="title">Blog</p>
        <p class="sub_title">추천 포스트</p>
        <div class="flex" id="recommended-posts">
            <div class="box_loading">
                <div class="image_loading shimmer"></div>
                <div class="text_loading shimmer" style="width: 80%; height: 12px; margin-top: 10px; background-color:aqua;"></div>
                <div class="text_loading shimmer" style="width: 60%; height: 16px; margin-top: 8px; background-color:aqua;"></div>
            </div>
            <div class="box_loading">
                <div class="image_loading shimmer"></div>
                <div class="text_loading shimmer" style="width: 80%; height: 12px; margin-top: 10px; background-color:aqua;"></div>
                <div class="text_loading shimmer" style="width: 60%; height: 16px; margin-top: 8px; background-color:aqua;"></div>
            </div>
        </div>
             

        <p class="sub_title two">최신 포스트</p>

        <div class="tag_flex">
            <button class="tag-button" data-tag="">전체</button>
            <button class="tag-button" data-tag="규정"># 규정</button>
            <button class="tag-button" data-tag="업데이트"># 업데이트</button>
            <button class="tag-button" data-tag="공지사항"># 공지사항</button>
            <button class="tag-button" data-tag="모집 공고"># 모집 공고</button>
        </div>

        <div id="post-list" class="post-button-container"></div>
    </div>

    <iframe src="/footer.html" style="width: 100%; height: 250px; max-height: 250px; border: none; overflow: hidden;"></iframe>

<script>
    function showRecommendedSkeleton() {
        const recommendedContainer = document.getElementById("recommended-posts");
        recommendedContainer.innerHTML = "";

        for (let i = 0; i < 2; i++) {
            const skeleton = document.createElement("div");
            skeleton.className = "box_loading";
            skeleton.innerHTML = `
                <div class="image_loading shimmer" style="height: 160px;"></div>
                <div class="text_loading shimmer" style="width: 80%; height: 12px; margin-top: 10px;"></div>
                <div class="text_loading shimmer" style="width: 60%; height: 16px; margin-top: 8px;"></div>
            `;
            recommendedContainer.appendChild(skeleton);
        }
    }
    showRecommendedSkeleton();
    document.addEventListener("DOMContentLoaded", () => {
        const postListElement = document.getElementById("post-list");
        const tagButtons = document.querySelectorAll(".tag-button");
        const recommendedContainer = document.getElementById("recommended-posts");

        tagButtons.forEach(button => {
            button.addEventListener("click", () => {
                const selectedTag = button.dataset.tag;
                loadPosts(selectedTag);
            });
        });

        function loadRecommendedPosts(posts) {
            recommendedContainer.innerHTML = "";

            posts.slice(0, 2).forEach((post, index) => {
                const button = document.createElement("button");
                button.classList.add("box");

                const image = document.createElement("img");
                image.classList.add("image");

                image.src = index === 0 ? "/IMG/미니 책.png" : "/IMG/확성기.png";

                const date = document.createElement("p");
                date.classList.add("main_date");
                date.textContent = `# ${post.tag}, ${post.date}`;

                const title = document.createElement("p");
                title.classList.add("main_title");
                title.textContent = post.title;

                button.appendChild(image);
                button.appendChild(date);
                button.appendChild(title);

                button.onclick = () => window.location.href = `/post/${post._id}`;
                recommendedContainer.appendChild(button);
            });
        }

        function loadPosts(tag = '') {
            let url = "/posts";
            if (tag) {
                url += `?tag=${encodeURIComponent(tag)}`;
            }

            fetch(url)
                .then(response => response.json())
                .then(posts => {
                    postListElement.innerHTML = "";

                    posts.forEach(post => {
                        const button = document.createElement("button");
                        const dateDiv = document.createElement("div");
                        const titleSpan = document.createElement("span");

                        button.classList.add("post-button");
                        dateDiv.classList.add("post-date");
                        titleSpan.classList.add("post-title");

                        dateDiv.textContent = `${post.tag}, ${post.date}`;
                        titleSpan.textContent = post.title;

                        button.appendChild(dateDiv);
                        button.appendChild(titleSpan);

                        button.onclick = () => window.location.href = `/post/${post._id}`;
                        postListElement.appendChild(button);
                    });
                })
                .catch(err => console.error("게시글을 가져오는 데 오류가 발생했습니다.", err));
        }

        fetch("/posts")
            .then(response => response.json())
            .then(posts => {
                loadRecommendedPosts(posts);
                loadPosts();
            });
    });



</script>

<script src="/Js/scrollTop.js"></script>
<script>
    fetch('/header.html')
        .then(response => response.text())
        .then(data => {
            document.getElementById('header-container').innerHTML = data;
        });
</script>
  
</body>
</html>
