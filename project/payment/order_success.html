<!DOCTYPE html>
<html lang="ko">
<head>
    <title>결제 완료 | shmpyoshop</title>
    <link rel="stylesheet" href="/project/payment/order.css"/>



    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="간편하게, 똑똑하게! 손쉽게 완성하는 나를 위한 시스템을 쉼표샵에서 만나보세요.">
    <meta name="robots" content="max-image-preview:large">
    <link href="/IMG/파비콘.svg" rel="shortcut icon" type="image/x-icon">
    <link rel="canonical" href="https://www.shmpyoshop.com/home">
    <meta property="og:locale" content="ko_KR">
    <meta property="og:site_name" content="쉼표샵 shmpyo#">
    <meta property="og:type" content="website">
    <meta property="og:title" content="쉼표샵 - 공식 홈페이지">
    <meta property="og:description" content="간편하게, 똑똑하게! 손쉽게 완성하는 나를 위한 시스템을 쉼표샵에서 만나보세요.">
    <meta property="og:url" content="https://www.shmpyoshop.com/home">
    <meta property="og:image" content="https://media.discordapp.net/attachments/1282189604803444830/1342507726852587580/7d134f0e74b599b0.png?ex=67b9e340&is=67b891c0&hm=6904e632e03d87dbba50a57a111c489a7739896954bfe1a0694361aa5689c343&=&format=webp&quality=lossless">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="쉼표샵 로고">    

    <meta name="twitter:site" content="https://www.shmpyoshop.com/home">
    <meta name="twitter:title" content="쉼표샵 - 공식 홈페이지">
    <meta name="twitter:description" content="간편하게, 똑똑하게! 손쉽게 완성하는 나를 위한 시스템을 쉼표샵에서 만나보세요.">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:src" content="https://media.discordapp.net/attachments/1282189604803444830/1342507726852587580/7d134f0e74b599b0.png?ex=67b9e340&is=67b891c0&hm=6904e632e03d87dbba50a57a111c489a7739896954bfe1a0694361aa5689c343&=&format=webp&quality=lossless">
</head>
<body>

    <div id="header-container"></div>

    <div class="info_1_section">
        <div>
            <svg class="success_icon" xmlns="http://www.w3.org/2000/svg" width="96.082" height="96.082" viewBox="0 0 96.082 96.082">
                <path id="check_circle_24dp_FFFFFF_FILL1_wght700_GRAD0_opsz24" d="M87.51-843.378l32.876-32.876-9.188-9.3L87.51-861.863,76.219-873.154l-9.188,9.3Zm6.531,25.459a46.987,46.987,0,0,1-18.817-3.772,48.4,48.4,0,0,1-15.21-10.241,48.394,48.394,0,0,1-10.241-15.21A46.986,46.986,0,0,1,46-865.959a46.986,46.986,0,0,1,3.772-18.817,48.394,48.394,0,0,1,10.241-15.21,48.389,48.389,0,0,1,15.21-10.241A46.984,46.984,0,0,1,94.041-914a46.984,46.984,0,0,1,18.817,3.773,48.389,48.389,0,0,1,15.21,10.241,48.394,48.394,0,0,1,10.241,15.21,46.986,46.986,0,0,1,3.772,18.817,46.986,46.986,0,0,1-3.772,18.817,48.4,48.4,0,0,1-10.241,15.21,48.4,48.4,0,0,1-15.21,10.241A46.987,46.987,0,0,1,94.041-817.918Z" transform="translate(-46 914)" fill="#2c4bce"/>
            </svg>


            <div class="h1">결제가 완료됐어요</div>
            <div class="p">상품의 비밀코드는 카카오톡으로 보내드렸어요.</div>
            <div class="button_parent">
                <button class="button" onclick="window.open('https://www.shmpyoshop.com/project/add/goods-code', '_blank')"><svg xmlns="http://www.w3.org/2000/svg" width="21.856" height="20.404" viewBox="0 0 21.856 20.404">
                    <path id="list_alt_check_24dp_FFFFFF_FILL0_wght300_GRAD0_opsz20" d="M165.56-778.6v0Zm.369,1.56a1.863,1.863,0,0,1-1.37-.56,1.863,1.863,0,0,1-.56-1.37v-15.1a1.863,1.863,0,0,1,.56-1.37,1.863,1.863,0,0,1,1.37-.56h15.1a1.863,1.863,0,0,1,1.37.56,1.863,1.863,0,0,1,.56,1.37v9.339H181.4v-9.339a.353.353,0,0,0-.116-.254.353.353,0,0,0-.254-.115h-15.1a.353.353,0,0,0-.254.115.353.353,0,0,0-.116.254v15.1a.352.352,0,0,0,.116.254.352.352,0,0,0,.254.116h7.529v1.56Zm13.826,1.44-3.566-3.584,1.1-1.115,2.463,2.493,4.985-4.985,1.115,1.1Zm-10.892-9.98a.927.927,0,0,0,.673-.268.9.9,0,0,0,.275-.667.927.927,0,0,0-.268-.673.9.9,0,0,0-.667-.275.927.927,0,0,0-.673.268.9.9,0,0,0-.275.667.926.926,0,0,0,.269.673A.9.9,0,0,0,168.864-785.577Zm0-4.542a.927.927,0,0,0,.673-.268.9.9,0,0,0,.275-.667.927.927,0,0,0-.268-.673.894.894,0,0,0-.667-.275.927.927,0,0,0-.673.268.9.9,0,0,0-.275.667.927.927,0,0,0,.269.673A.9.9,0,0,0,168.864-790.119Zm3.293,4.381h6.832v-1.56h-6.832Zm0-4.543h6.832v-1.56h-6.832Z" transform="translate(-164 796)" fill="#77808b"/>
                  </svg>
                   비밀코드 활성화 신청</button>
                <button class="button" onclick="window.open('https://www.shmpyoshop.com/project/download/code-for-download.html', '_blank')"><svg xmlns="http://www.w3.org/2000/svg" width="18.453" height="18.453" viewBox="0 0 18.453 18.453">
                    <path id="다운로드" d="M189.226-766.113l-5.252-5.252,1.3-1.334,3.033,3.033V-780h1.845v10.334l3.033-3.033,1.3,1.334Zm-7,4.566a2.147,2.147,0,0,1-1.578-.646,2.147,2.147,0,0,1-.646-1.578v-3.336h1.845v3.336a.361.361,0,0,0,.118.26.361.361,0,0,0,.26.118h14.005a.361.361,0,0,0,.26-.118.361.361,0,0,0,.118-.26v-3.336h1.845v3.336a2.147,2.147,0,0,1-.646,1.578,2.147,2.147,0,0,1-1.578.646Z" transform="translate(-180 780)" fill="#77808b"/>
                  </svg>
                   상품 다운로드</button>
            </div>

            <div class="flex">
                <div class="section_one">
                    <img class="img_pro" src="/IMG/product_img/SP2537.png">
                    <div class="inline">
                        <div id="h1_pro" class="h1_pro"></div>
                        <div id="price_pro" class="price_pro"></div>
                    </div>
                </div>

                <svg xmlns="http://www.w3.org/2000/svg" width="1" height="57" viewBox="0 0 1 57">
                    <line id="선_4" data-name="선 4" y2="57" transform="translate(0.5)" fill="none" stroke="#dfdfdf" stroke-width="1"/>
                </svg>
                  

                <div class="section_two">
                    <dt class="p_pro_one">이름</dt>
                    <dt class="p_pro_one">전화번호</dt>
                    <dt class="p_pro_one">주문번호</dt>
                </div>
                <div class="section_two">
                    <div id="name" class="p_pro_two"></div>
                    <div id="phone" class="p_pro_two"></div>
                    <div id="order_id" class="p_pro_two"></div>
                </div>
            </div>
        </div>
    </div>

    <iframe src="/footer.html" style="width: 100%; height: 250px; max-height: 250px; border: none; overflow: hidden;"></iframe>
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const paymentKey = urlParams.get("paymentKey");
        const orderId = urlParams.get("orderId");
        const amount = urlParams.get("amount");
        const orderName = urlParams.get("orderName");
        const userName = urlParams.get("customerName");
        const userphone = urlParams.get("customerPhone");
        const coupon = urlParams.get("coupon");
        const roblox = urlParams.get("roblox");

        async function confirm() {
            const requestData = {
                paymentKey: paymentKey,
                orderId: orderId,
                amount: amount,
                orderName: orderName,
                userName: userName,
                userphone: userphone,
                coupon: coupon,
                roblox: roblox
            };

            const response = await fetch("/confirm", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify(requestData),
            });

            const json = await response.json();

            if (!response.ok) {
            // 결제 실패 비즈니스 로직을 구현하세요.
            console.log(json);
            window.location.href = `/fail?message=${json.message}&code=${json.code}`;
            }

            // 결제 성공 비즈니스 로직을 구현하세요.
            console.log(json);
        }
        confirm();

        const paymentKeyElement = document.getElementById("name");
        const orderIdElement = document.getElementById("order_id");
        const amountElement = document.getElementById("price_pro");
        const orderNameElement = document.getElementById("h1_pro");
        const phoneElement = document.getElementById("phone");
        const formattedPrice = parseInt(amount).toLocaleString() + '원';

        orderIdElement.textContent = orderId;
        phoneElement.textContent = userphone
        amountElement.textContent = formattedPrice;
        paymentKeyElement.textContent = userName;
        orderNameElement.textContent = orderName
    </script>
    
    <script src="./Js/scrollTop.js"></script>

    <script>
        fetch('/header.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('header-container').innerHTML = data;
            });
    </script>
</body>
</html>
